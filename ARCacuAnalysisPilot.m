%%

filePath = 'G:\My Drive\exp_bvams\code_repo\ARC\';

if strcmp(getenv('username'),'bankslab')
   dataDirectory = [filePath];
elseif strcmp(getenv("USER"),'benjaminchin')
   dataDirectory = '/Users/benjaminchin/Library/CloudStorage/GoogleDrive-bechin@berkeley.edu/Shared drives/ARChroma/Analysis/'; 
elseif strcmp(getenv("USER"),'emily')
   dataDirectory = '/Users/emily/Library/CloudStorage/GoogleDrive-emilyacooper@gmail.com/Shared drives/ARChroma/Analysis/';
end
filenames = {
%              [dataDirectory 'S1006V7_AFC_RightACL0_2312211410.mat'] ...
%              [dataDirectory 'S1006V7_AFC_RightACL0_2312211413.mat'] ...
%              [dataDirectory 'S1006V7_AFC_RightACL0_2312211415.mat'] ...
%              [dataDirectory 'S1006V7_AFC_RightACL0_2312211421.mat'] ...
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401101331.mat'] ... 
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401101401.mat'] ...
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401101430.mat'] ...
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401101623.mat'] ...
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401111550.mat'] ...
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401121659.mat'] ...
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401121728.mat'] ...
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401121749.mat'] ...
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401121805.mat'] ...
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401131237.mat'] ...
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401141627.mat'] ...
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401141644.mat'] ...
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401141706.mat'] ...
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401141721.mat'] ...
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401161033.mat'] ...
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401161038.mat'] ...
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401161057.mat'] ...
%              [dataDirectory 'S1006V8_AFC_RightACL0_2401161102.mat'] ...  
%               [dataDirectory 'S1006V8_AFC_RightACL0_2401161120.mat'] ...
%               [dataDirectory 'S1006V8_AFC_RightACL0_2401161125.mat'] ...  
                 [dataDirectory 'S1007V9_AFC_RightACL0_2401191602.mat'] ...
                 [dataDirectory 'S1007V9_AFC_RightACL0_2401191608.mat'] ...
                 [dataDirectory 'S1007V9_AFC_RightACL0_2401191614.mat'] ...
                 [dataDirectory 'S1007V9_AFC_RightACL0_2401191617.mat'] ...
                 [dataDirectory 'S1007V9_AFC_RightACL0_2401191621.mat'] ...
                 [dataDirectory 'S1007V9_AFC_RightACL0_2401191625.mat'] ...
                 [dataDirectory 'S1007V9_AFC_RightACL0_2401191628.mat'] ...
                 [dataDirectory 'S1007V9_AFC_RightACL0_2401191632.mat'] ...  
                 [dataDirectory 'S1007V9_AFC_RightACL0_2401191635.mat'] ...
                 [dataDirectory 'S1007V9_AFC_RightACL0_2401191639.mat'] ...  
             };

rgb = [];
meanFocstmOptDst = [];
focStmOptDstIncr = [];
rspAcu = [];
stimOrientation = [];

for i = 1:length(filenames)
    load(filenames{i});
    rgb = [rgb; AFCp.rgb];
    meanFocstmOptDst = [meanFocstmOptDst; AFCp.meanFocstmOptDst];
    focStmOptDstIncr = [focStmOptDstIncr; AFCp.focStmOptDstIncr];
    rspAcu = [rspAcu; AFCp.rspAcu'];
    stimOrientation = [stimOrientation; AFCp.stimOrientation];
end

unqFocDst = unique(focStmOptDstIncr);
scaleFac = 0.8;
meanFocInt = 2.5;

for i = 1:length(unqFocDst)
    PC(i) = sum(rspAcu(focStmOptDstIncr==unqFocDst(i) & meanFocstmOptDst==meanFocInt)==stimOrientation(focStmOptDstIncr==unqFocDst(i) & meanFocstmOptDst==meanFocInt))./sum(focStmOptDstIncr==unqFocDst(i) & meanFocstmOptDst==meanFocInt); 
end

figure;
plot(unqFocDst.*scaleFac,PC,'ro-','MarkerFaceColor','w','LineWidth',1.5,'MarkerSize',10);
axis square;
ylim([0.4 1]);
formatFigure('Relative optical distance (D)','Proportion Correct');