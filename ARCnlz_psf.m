%%

foldername = '/Users/benjaminchin/Library/CloudStorage/GoogleDrive-bechin@berkeley.edu/Shared drives/CIVO_BVAMS/data/ARC/';

subjNum = 11;

if subjNum==18
    filenames = {
                 'S1018V1_AFC_RightACL0_2409061234.mat' ...
                 'S1018V1_AFC_RightACL0_2409061236.mat' ...
                 'S1018V1_AFC_RightACL0_2409061237.mat' ...
                 'S1018V1_AFC_RightACL0_2409061240.mat' ...
                 'S1018V1_AFC_RightACL0_2409061243.mat' ...
                 'S1018V1_AFC_RightACL0_2409061247.mat' ...
                 };
elseif subjNum==20
    filenames = {
                 % 'S1020V1_AFC_RightACL0_2409091341.mat' ...
                 'S1020V1_AFC_RightACL0_2409091343.mat' ...
                 'S1020V1_AFC_RightACL0_2409091344.mat' ...
                 'S1020V1_AFC_RightACL0_2409091347.mat' ...
                 'S1020V1_AFC_RightACL0_2409091352.mat' ...
                 'S1020V1_AFC_RightACL0_2409091357.mat' ...
                 'S1020V1_AFC_RightACL0_2409091400.mat' ...
                 'S1020V1_AFC_RightACL0_2409091404.mat' ...
                 'S1020V1_AFC_RightACL0_2409091407.mat' ...
                 'S1020V1_AFC_RightACL0_2409091410.mat' ...
                 'S1020V1_AFC_RightACL0_2409091414.mat' ...
                 'S1020V1_AFC_RightACL0_2409091416.mat' ...
                 'S1020V1_AFC_RightACL0_2409091420.mat' ...
                 };    
elseif subjNum==11
    filenames = {
                 'S1011V17_AFC_RightACL0_2409100948.mat' ...
                 'S1011V17_AFC_RightACL0_2409100949.mat' ...
                 'S1011V17_AFC_RightACL0_2409100955.mat' ...
                 'S1011V17_AFC_RightACL0_2409101002.mat' ...
                 'S1011V17_AFC_RightACL0_2409101007.mat' ...
                 'S1011V17_AFC_RightACL0_2409101014.mat' ...
                 'S1011V17_AFC_RightACL0_2409101019.mat' ...
                 };        
end

for i = 1:length(filenames)
    load([foldername filenames{i}]);
    lengthRsp = length(AFCp.rspAcu);
    AFCp.t3 = AFCp.t3(1:lengthRsp,:,:);
    AFCp.rgb = AFCp.rgb(1:lengthRsp,:);
    AFCp.meanFocstmOptDst = AFCp.meanFocstmOptDst(1:lengthRsp);
    AFCp.contrast = AFCp.contrast(1:lengthRsp);
    AFCp.rspAcu = AFCp.rspAcu';
    AFCp.stimOrientation = AFCp.stimOrientation(1:lengthRsp);
    if i==1
        AFCpAll = AFCp;
    else
        AFCpAll = structmerge(AFCpAll,AFCp);
    end
end

rgbUnq = [0.569 0.000 0.000; ...
          0.000 0.432 0.000; ...
          0.000 0.000 1.000; ...
          0.569 0.000 1.000];

for i = 1:size(rgbUnq,1)
    ind = abs(AFCpAll.rgb(:,1)-rgbUnq(i,1))<0.001 & ...
          abs(AFCpAll.rgb(:,2)-rgbUnq(i,2))<0.001 & ...
          abs(AFCpAll.rgb(:,3)-rgbUnq(i,3))<0.001;
    psyfitgengauss(zeros(size(AFCpAll.contrast(ind))),AFCpAll.contrast(ind),AFCpAll.rspAcu(ind)==AFCpAll.stimOrientation(ind),[],[],[],1,2,1)
end
