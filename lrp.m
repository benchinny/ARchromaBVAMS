clear all
%% calculate loan repayments 201121

clr
p0=90000; 
i0=0.0325./12;
n0=12.*5;
%m0=1627.2 m1=97,632.0

clr
p0=175000; 
i0=0.0325./12;
n0=12.*15;
%m0=1,229.67 m1=221,340.66 m2=46,340.66

clr
p0=1E6; 
i0=0.03./12;
n0=12.*30;
%m0=4,216.04 m1=1,517,774.52 m2=517,774.52

clr
p0=1E6; 
i0=0.02./12;
n0=12.*30;
%m0=3,696.19 m1=1,330,630.10 m2=330,630.10

clr
p0=1E6; 
i0=0.01./12;
n0=12.*30;
%m0=3216.39 m1=1,157,902.27 m2=157,902.27

clr
p0=150000; 
i0=0.02./12;
n0=36;
%'m0=4296.38 m1=154669.92 i2=4669.92'


clr
p0=150000; 
i0=0.022./12;
n0=48;
%'m0=3267.37 m1=156834.15 i2=6834.15'

clr
p0=150000; 
i0=0.0255./12;
n0=60;
%'m0=2665.41 m1=159924.75 i2=9924.75'

clr
p0=150000; 
i0=0.0295./12;
n0=84; % number of months
%'m0=1978.6166 m1=166203.7965 i2=16203.7965'

clr
p0=90000; 
i0=0.0255./12;
n0=12.*5;
%'m0=1599.2475 m1=95954.8508 i2=5954.8508'

m0=(p0.*i0.*(1+i0).^n0)./((1+i0).^n0-1) % 1627.2
m1=n0*m0; %loan+interest total
i2= m1-p0  % total interest
%(i0/12)*p0
p1=m1; i1=[]; p2=[];
for k0=1:60
    p1=[p1 p1(end)-m0]; %loan+interest remaining
    i1=p0(end).*i0; %interest payment
    p2=[p2 m0-i1(end)]; %loan payment
    p0=[p0 p0(end)-p2(end)]; %remaining loan
    %i1=(m0-p0(end).*i0)    
end

['m0=' n2s(m0) ' m1=' n2s(m1) ' i2=' n2s(i2)]